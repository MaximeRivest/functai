
```{python}
from functai import *

@ai(lm="gpt-4.1", autocompile=True, autoinstruct_improve_calls=3)
def extract(text):
    ...

print(extract.signature.instructions)
extract("here is a list: apple, orange, banana")
print(extract.signature.instructions)
extract("1 apple,2 orange,12 banana")
print(extract.signature.instructions)
extract("To day I want to the grocery stoe and I go some apples and onions and a sandwich pre made, return the list in french!!!")
print(extract.signature.instructions)
```

```{python}
extract("1 apple,2 orange,12 banana")
```


```{python}
extract("To day I want to the grocery stoe and I go some apples and onions and a sandwich pre made, return the list in french!!!")
```

```{python}
from functai import *
import typing

@ai(lm = "gpt-4.1")
def extract(text) -> typing.List[str]:
    ...

extract("here is a list: apple, orange, banana")
```



```{python}
from functai import *

@ai(lm = "gpt-4.1")
def extract(text) -> dict[str, list[str]]:
    ...

extract("json apple, orange, banana")
```


```{python}
from functai import *

@ai(lm = "gpt-4.1")
def extract(text) -> list[int]:
    ...

extract("count letters apple, orange, banana")
```



```{python}
from functai import *

@ai(lm = "gpt-4.1")
def extract(text) -> list[int]:
    thinking = _ai
    return _ai

extract("count letters apple, orange, banana")
```


```{python}
@ai(lm="gpt-4.1")
def extract(text) -> list[int]:
    "count letters"
    thinking = _ai
    res = _ai
    return res

extract("apple, orange, banana")
```


```{python}
@ai(lm="gpt-4.1")
def extract(text):
    "count letters"
    res: list[int] = _ai
    return res

extract("apple, orange, banana")
```


```{python}
@ai(lm="gpt-4.1")
def extract(text) -> list[int]:
    res: str = _ai
    return res

extract("apple, orange, banana")
```


```{python}
@ai(lm="gpt-4.1")
def extract(
    text # unstructured text
    ) -> 'extacted_list': # list of fruit first and quantity after
    ...

extract("""
I'll go shopping for:

    2 apple,one orange,a dozen banana
""")

# > 'apple 2, orange 1, banana 12'
```